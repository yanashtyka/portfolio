(function(){"use strict";function e(){let e=[0];e=e.concat(l.get("project_administrator_ids")),e.push(l.get("current_user_id")),e=e.map(e=>Number(e)),document.querySelectorAll("select[name=handler_id]").forEach(t=>{let n=[];for(const o of t.options)e.includes(Number(o.value))||n.push(o);for(;n.length>0;)n.pop().remove()})}function t(){const e=document.getElementById("account-prefs-update-form"),t=["timezone","language"];if(!e)return;let n=[];e.querySelectorAll("tr").forEach(e=>{let o=!0;e.querySelectorAll("input").forEach(e=>{if(t.includes(e.name))o=!1;else if("radio"==e.type||"checkbox"==e.type){if(e.checked){const t=document.createElement("input");t.name=e.name,t.value=e.value,n.push(t)}}else{const t=document.createElement("input");t.name=e.name,t.value=e.value,n.push(t)}}),e.querySelectorAll("select").forEach(e=>{if(t.includes(e.name))return void(o=!1);const a=document.createElement("input");a.name=e.name,a.value=e.value,n.push(a)}),o&&e.remove()});for(const t of n)t.type="hidden",e.appendChild(t)}function n(){const e=["account_manage_columns_page.php","api_tokens_page.php"],t=document.querySelector(".page-content");t&&t.querySelectorAll("li > a").forEach(t=>{let n=!1;e.forEach(e=>{t.href.includes(e)&&(n=!0)}),n&&t.parentElement.remove()})}function o(){document.querySelectorAll('form textarea[name="steps_to_reproduce"]').forEach(e=>{if(e.required=!0,e.labels){const t=document.createElement("span");t.className="required",t.textContent="*",e.labels[0].before(t)}})}function a(){l.get("total_bugs_maximum")<=0||document.querySelectorAll("#navbar-container>.navbar-buttons>.nav.ace-nav>li>.btn-group").forEach(e=>{const t=document.createElement("i");t.className="fa fa-bug";let n=document.createTextNode(" ");n.appendData(l.get("total_bugs")),n.appendData(" / "),n.appendData(l.get("total_bugs_maximum"));const o=document.createElement("button");o.className="btn btn-sm",o.classList.add(l.get("total_bugs")>=l.get("total_bugs_maximum")?"btn-danger":"btn-success"),o.disabled=l.get("total_bugs")>=l.get("total_bugs_maximum"),o.appendChild(t),o.appendChild(n),e.appendChild(o)})}function r(){function e(e){if(!e)return;const t=l.get("current_user_id");for(var n=0;n<e.options.length;){const o=e.options[n];o.value>0&&o.value!=t?o.remove():n++}}$(()=>e(document.querySelector('select[name="reporter_id[]"]'))),$(document).on("ajaxComplete",()=>e(document.querySelector('select[name="reporter_id[]"]')))}function c(){function e(){document.querySelectorAll("#platform,#os,#os_build").forEach(e=>{e.required=!(t&&t.value);const n=document.querySelector(`label[for=${e.id}]`);if(n)if(e.required){const e=document.createElement("span");e.classList.add("required"),e.textContent="*",n.prepend(e),document.getElementById("profile_closed_link");const t=document.getElementById("profile_closed"),o=document.getElementById("profile_closed_link");t&&"none"!==t.style.display&&o.click()}else n.querySelectorAll(".required").forEach(e=>e.remove())})}const t=document.querySelector("select#profile_id");t&&t.addEventListener("input",e),e()}document.addEventListener("DOMContentLoaded",()=>{r(),c(),e(),t(),n(),o(),a()});const l={isInitialized:!1,data:{},get(e){return this.isInitialized||this.init(),this.data.hasOwnProperty(e)?this.data[e]:null},init(){const e=document.head.querySelector('meta[title="plugin_userclient_params"]').getAttribute("content");this.data=JSON.parse(atob(e)),this.isInitialized=!0}}})();